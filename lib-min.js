/* Please note - this file is not updated as often as the scripts, so when using this script, you may have to wait longer for new updates. */
/* Copyright: Pixelbulb 2022 https://pixelbulb.online */
/* You may use this script without prior permission or credit as long as nothing, including comments, is omitted */


const globalValues={};globalValues.FPS=60,globalValues.CPS=100,window.addEventListener("load",function(){document.body.addEventListener("mousemove",function(a){let b=a.clientX-window.screen.width/2,c=window.screen.height/2-a.clientY;globalValues.mouseX=b,globalValues.mouseY=c})});function getDirection(a,b,c,d){return 180*Math.atan((c-a)/(d-b))/Math.PI-180*(d<b)}function getMaxLayer(){const a=sprites;let b=0;for(i=0;i<a.length;i++)a[i].layer>b&&(b=a[i].layer);return b}function moveSpritesUp(){const a=sprites;for(i=0;i<a.length;i++)++a[i].layer}function updateDirection(){spriteData.direction%=360}function move_steps(){change_x(Math.sin(spriteData.direction-90)),change_y(Math.cos(spriteData.direction-90))}function set_x(a){spriteData.x=a}function change_x(a){spriteData.x+=a}function change_y(a){spriteData.y+=a}function set_y(a){spriteData.y=a}function go_to(a,b){set_x(a),set_y(b)}function go_to_mouse(){go_to(globalValues.mouseX,globalValues.mouseY)}function rotate_left(a){point_in_direction(spriteData.direction-a)}function rotate_right(a){point_in_direction(spriteData.direction+a)}function point_in_direction(a){spriteData.direction=a,updateDirection()}function point_towards_mouse(){point_in_direction(getDirection(spriteData.x,spriteData.y,globalValues.mouseX,globalValues.mouseY))}function set_costume(a){spriteData.costume=a}function set_size(a){spriteData.size=a}function change_size(a){set_size(spriteData.size+a)}function show(){spriteData.show=!0}function hide(){spriteData.show=!1}function go_to_front(){spriteData.layer=getMaxLayer()+1}function go_to_back(){moveSpritesUp(),spriteData.layer=0}function go_forward(a){spriteData.layer+=a}function go_backward(a){spriteData.layer-=a}function set_opacity(a){spriteData.opacity=a}function change_opacity(a){spriteData.opacity+=a}wait=a=>new Promise(b=>{setTimeout(b,a)});async function pause(a){await wait(1e3*a)}function repeat(a,b,c,d){for(i=0;i<a;i++)c?setTimeout(function(){b()},10*i):b();d&&(c?setTimeout(function(){d()},1e3/globalValues.CPS*(a+1)):d())}function forever(a){a(),setTimeout(function(){forever(a)},1e3/globalValues.CPS)}const sprites=[];function updateSprite(a,b){a.src=b.costume,a.style.zIndex=b.layer;let c=b.x+window.innerWidth/2,d=-b.y+window.innerHeight/2;a.style.left=c-a.clientWidth/2,a.style.top=d-a.clientHeight/2,a.style.display=b.show?"":"none",a.style.transform=`rotate(${b.direction-90}deg) scale(${b.size/100})`,a.style.opacity=b.opacity/100}function initSprite(a,b){updateSprite(a,b),b.renderProcess=setTimeout(function(){initSprite(a,b)},1e3/globalValues.FPS)}function createSprite(a){return sprites.push({}),id=sprites.length-1,element=document.createElement("img"),element.id="sprite#"+id,element.style.display="none",element.style.position="fixed",document.body.appendChild(element),sprite=sprites[id],sprite.direction=90,sprite.x=0,sprite.y=0,sprite.show=!0,sprite.size=100,sprite.layer=getMaxLayer()+1,sprite.costume=a,sprite.opacity=100,sprite.run=function(a,b){this.spriteData=this,spriteData=this.spriteData,spriteData,a(b),spriteData=void 0},initSprite(document.getElementById("sprite#"+id),sprite),id}function getSprite(a){return sprites[a]}
